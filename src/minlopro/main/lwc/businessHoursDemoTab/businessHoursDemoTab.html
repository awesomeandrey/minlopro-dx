<template>
    <lightning-card>
        <span slot="title" class="slds-text-title_caps"><code>c-business-hours-demo-tab</code></span>
        <lightning-button-group slot="actions">
            <lightning-button label="Reset" variant="neutral" onclick={handleReset}></lightning-button>
        </lightning-button-group>
        <lightning-layout multiple-rows>
            <lightning-layout-item size="6">
                <lightning-layout>
                    <lightning-layout-item flexibility="no-grow" padding="around-small">
                        <c-combobox
                            label="Business Hours"
                            options={businessHours}
                            value={selectedBusinessHoursId}
                            onchange={handleChangeBusinessHours}
                            required
                        ></c-combobox>
                    </lightning-layout-item>
                    <lightning-layout-item flexibility="no-grow" padding="around-small">
                        <c-combobox
                            label="Timezone SID Key"
                            options={businessHoursTimezones}
                            value={selectedTimezoneKey}
                            disabled
                        ></c-combobox>
                    </lightning-layout-item>
                    <lightning-layout-item flexibility="no-grow" padding="around-small">
                        <c-combobox
                            label="Next SMS Delay Hours"
                            options={nextSmsDelayHours}
                            value={selectedNextSmsDelayHour}
                            onchange={handleChangeNextSmsDelayHour}
                            required
                        ></c-combobox>
                    </lightning-layout-item>
                </lightning-layout>
                <lightning-layout>
                    <lightning-layout-item size="12" padding="horizontal-small">
                        <lightning-input
                            label="Datetime #1"
                            type="datetime"
                            timezone={selectedTimezoneKey}
                            value={datetime1}
                            onchange={handleChangeDate1}
                            disabled={disableDatetimeInputs}
                            required
                        ></lightning-input>
                        <p lwc:if={selectedTimezoneKey} class="slds-p-vertical_x-small">
                            <code>
                                <lightning-formatted-date-time
                                    year="numeric"
                                    month="2-digit"
                                    day="numeric"
                                    hour="2-digit"
                                    minute="2-digit"
                                    time-zone-name="short"
                                    time-zone={selectedTimezoneKey}
                                    value={datetime1}
                                ></lightning-formatted-date-time>
                            </code>
                        </p>
                        <lightning-button
                            label="Calculate"
                            onclick={handleCalculateMetrics}
                            disabled={disableDatetimeInputs}
                        ></lightning-button>
                    </lightning-layout-item>
                </lightning-layout>
            </lightning-layout-item>
            <lightning-layout-item size="6">
                <c-stats label="Stats" icon-name="standard:lead" value={stats}></c-stats>
                <div class="slds-m-vertical_medium">
                    <c-error-alert value={error}></c-error-alert>
                </div>
                <c-datatable
                    key-field="Id"
                    data={bhData}
                    columns={bhColumns}
                    hide-checkbox-column
                    show-row-number-column
                ></c-datatable>
            </lightning-layout-item>
            <lightning-layout-item size="12" padding="around-medium">
                <p class="slds-text-title_caps slds-p-vertical_small">
                    Date/Time stamp representation in active Business Hours timezones:
                </p>
                <c-datatable
                    key-field="businessHoursId"
                    data={datetimeMetricsData}
                    columns={datetimeMetricsColumns}
                    hide-checkbox-column
                    show-row-number-column
                ></c-datatable>
                <p class="slds-text-title_caps slds-p-vertical_small">
                    Next SMS to send <span class="slds-text-title_bold">(delay = {selectedNextSmsDelayHour} business hours)</span>
                </p>
                <c-datatable
                    key-field="businessHoursId"
                    data={datetimeMetricsData}
                    columns={nextSmsMetricsColumns}
                    hide-checkbox-column
                    show-row-number-column
                ></c-datatable>
            </lightning-layout-item>
        </lightning-layout>
    </lightning-card>
</template>
